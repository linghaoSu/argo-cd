{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "github>argoproj/argo-cd//renovate-presets/commons.json5",
    "github>argoproj/argo-cd//renovate-presets/custom-managers/shell.json5",
    "github>argoproj/argo-cd//renovate-presets/custom-managers/yaml.json5",
    "github>argoproj/argo-cd//renovate-presets/fix/disable-all-updates.json5",
    "github>argoproj/argo-cd//renovate-presets/devtool.json5",
    "github>argoproj/argo-cd//renovate-presets/docs.json5"
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["^manifests/ha/base/redis-ha/chart/requirements\\.yaml$"],
      "matchStrings": [
        "- name: redis-ha\\s+version: (?<currentValue>.*?)\\s+repository: (?<registryUrl>.*?)"
      ],
      "datasourceTemplate": "helm",
      "depNameTemplate": "redis-ha",
      "packageNameTemplate": "redis-ha",
      "postUpdateOptions": ["helmUpdateSubchartArchives"],
      "postUpgradeTasks": {
        "commands": [
          "cd {{{packageFileDir}}}/../ && ./generate.sh",
          "make manifests-local"
        ],
        "fileFilters": ["manifests/ha/base/redis-ha/chart/upstream.yaml", "manifests/ha/**/*.yaml", "manifests/**/*.yaml"]
      }
    }
  ]
}
